<div class="trashbins-dashboard">
  <!-- Page Title -->
  <div class="page-header">
    <h1>Trashbin List Page</h1>
  </div>

  <!-- Main Content Area -->
  <div class="main-content">
    <!-- Left Panel - Bins List -->
    <div class="bins-panel">
      <!-- Overview Cards -->
      <div class="overview-cards">
        <div class="card stat-card" 
             [class.active]="activeFilter === 'all'"
             (click)="filterBy('all')">
          <div class="card-body">
            <div class="stat-icon total">
              <i class="fas fa-trash-alt"></i>
            </div>
            <div class="stat-info">
              <h3>{{ getTotalBinsCount() }}</h3>
              <p>Total Bins</p>
            </div>
          </div>
        </div>
        
        <div class="card stat-card" 
             [class.active]="activeFilter === 'full'"
             (click)="filterBy('full')">
          <div class="card-body">
            <div class="stat-icon fullness">
              <i class="fas fa-exclamation-triangle"></i>
            </div>
            <div class="stat-info">
              <h3>{{ getFullBinsCount() }}</h3>
              <p>Fullness</p>
            </div>
          </div>
        </div>
        
        <div class="card stat-card" (click)="addTrashbin()">
          <div class="card-body">
            <div class="stat-icon add">
              <i class="fas fa-plus"></i>
            </div>
            <div class="stat-info">
              <h3>Add</h3>
              <p>New Bin</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Bins Table -->
      <div class="table-container">
        <table class="bins-table">
          <thead>
            <tr>
              <th>Bin Name</th>
              <th>Address</th>
              <th>Created Date</th>
              <th>Height (cm)</th>
              <th>Threshold (%)</th>
              <th>Fullness (%)</th>
            </tr>
          </thead>
          <tbody>
            @for (trashbin of filteredTrashbins; track trashbin.binId) {
              <tr (click)="selectTrashbin(trashbin)">
                <td>{{ trashbin.name }}</td>
                <td>{{ trashbin.location?.address || 'No address' }}</td>
                <td>{{ trashbin.createdDate || 'N/A' }}</td>
                <td>{{ trashbin.height || 'N/A' }}</td>
                <td>{{ trashbin.threshold || 80 }}</td>
                <td>
                  <span class="fill-percentage" 
                        [class.critical]="(trashbin.currentFillPercentage || 0) >= (trashbin.threshold || 80)">
                    {{ (trashbin.currentFillPercentage || 0).toFixed(0) }}
                  </span>
                </td>
              </tr>
            }
          </tbody>
        </table>
      </div>
    </div>

    <!-- Right Panel - Map -->
    <div class="map-panel">
      <div class="panel-header">
        <h3>Map View</h3>
      </div>
      
      <div class="map-container">
        <google-map 
          height="100%" 
          width="100%"
          [center]="mapCenter"
          [zoom]="mapZoom">
          
          @for (trashbin of trashbinsWithLocation; track trashbin.binId) {
            <map-marker
              [position]="{lat: trashbin.location!.latitude!, lng: trashbin.location!.longitude!}"
              [title]="trashbin.name"
              (mapClick)="selectTrashbin(trashbin)">
            </map-marker>
          }
        </google-map>
      </div>
    </div>
  </div>
</div>

<!-- Back Link -->
<p class="back-link">
  <a routerLink="/trashbins">
    <i class="fas fa-arrow-left"></i> Back to trash bin page
  </a>
</p>
